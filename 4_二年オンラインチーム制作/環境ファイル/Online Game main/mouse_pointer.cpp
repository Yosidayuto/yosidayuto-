//=============================================================================
//
// マウスポインタ処理 [mouse_pointer.cpp]
// Author : 吉田悠人
//
//=============================================================================

//*****************************************************************************
// マクロ定義
//*****************************************************************************
#define MAX_SIZE (50)

//*****************************************************************************
// インクルードヘッダー
//*****************************************************************************
#include "mouse_pointer.h"
#include "input_mouse.h"
#include "manager.h"
//=============================================================================
//静的メンバ変数宣言
//=============================================================================
LPDIRECT3DTEXTURE9 CPointer::m_pTexture = NULL;

//=============================================================================
// コンストラクタ
//=============================================================================
CPointer::CPointer()
{
}

//=============================================================================
// デストラクタ
//=============================================================================
CPointer::~CPointer()
{
}

//=============================================================================
// テクスチャ読み込み
//=============================================================================
HRESULT CPointer::Load(void)
{
	//デバイスの取得
	LPDIRECT3DDEVICE9 pD3DDevice = CManager::GetRenderer()->GetDevice();
	// テクスチャの生成
	D3DXCreateTextureFromFile(pD3DDevice, MOUSE_POINTER, &m_pTexture);

	return S_OK;
}

//=============================================================================
// テクスチャ破棄
//=============================================================================
void CPointer::Unload(void)
{
	// テクスチャの破棄
	if (m_pTexture != NULL)
	{
		m_pTexture->Release();
		m_pTexture = NULL;
	}
}

//=============================================================================
// 作成処理
//=============================================================================
CPointer * CPointer::Create(void)
{
	CPointer *pPointer;
	//インスタンス生成
	pPointer = new CPointer;

	//初期化処理
	if (pPointer != NULL)
	{
		pPointer->Init();
	}

	return pPointer;
}

//=============================================================================
// 初期化処理
//=============================================================================
HRESULT CPointer::Init(void)
{
	//テクスチャ設定
	BindTexture(m_pTexture);

	//初期化処理
	CScene2D::Init(D3DXVECTOR3(MAX_SIZE, MAX_SIZE, 0.0f));
	return S_OK;
}

//=============================================================================
// 終了処理
//=============================================================================
void CPointer::Uninit(void)
{
	CScene2D::Uninit();
}

//=============================================================================
// 更新処理
//=============================================================================
void CPointer::Update(void)
{
	//マウス取得
	CInhMouse *pMouse = CManager::GetMouse();
	//マウス位置取得
	D3DXVECTOR3 MousePos = D3DXVECTOR3((float)pMouse->GetMousePos().x, (float)pMouse->GetMousePos().y, 0.0f);
	//マウスポインター位置をセット
	SetPosition(D3DXVECTOR3(MousePos.x, MousePos.y, 0.0f));
}

//=============================================================================
// 描画処理
//=============================================================================
void CPointer::Draw(void)
{
	CScene2D::Draw();
}
